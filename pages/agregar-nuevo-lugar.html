<!DOCTYPE html>
<html lang="en">

<head>
    <title>Agregar nuevo lugar turístico - Catamap</title>
    <link rel="icon" type="image/x-icon" href="./assets/favicon.ico" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="/styles/agregar-nuevo-lugar.css">
</head>

<body>

    <div class="form-container">
        <h2>Agregar nuevo lugar turístico</h2>
        <form id="lugarForm" novalidate>

            <label for="nombre">Nombre del lugar</label>
            <input type="text" id="nombre" name="nombre" required>
            <div class="error" id="errorNombre"></div>

            <label for="coordenadas">Coordenadas (latitud, longitud)</label>
            <input type="text" id="coordenadas" name="coordenadas" placeholder="-28.4696, -65.7852" required>
            <div class="error" id="errorCoordenadas"></div>

            <label for="imagen">Imagen</label>
            <input type="file" id="imagen" name="imagen" accept="image/*" required>
            <div class="error" id="errorImagen"></div>

            <label for="dificultad">Dificultad del camino</label>
            <select id="dificultad" name="dificultad" required>
                <option value="">Seleccione</option>
                <option value="facil">Fácil</option>
                <option value="media">Media</option>
                <option value="dificil">Difícil</option>
            </select>
            <div class="error" id="errorDificultad"></div>

            <label>Acceso</label>
            <input type="checkbox" id="aPie" name="acceso" value="pie"> A pie<br>
            <input type="checkbox" id="vehiculo" name="acceso" value="vehiculo"> Vehículo
            <div class="error" id="errorAcceso"></div>

            <label for="tipo">Tipo de lugar</label>
            <select id="tipo" name="tipo" required>
                <option value="">Seleccione</option>
                <option value="natural">Natural</option>
                <option value="cultural">Cultural</option>
                <option value="religioso">Religioso</option>
                <option value="aventura">Aventura</option>
            </select>
            <div class="error" id="errorTipo"></div>

            <label for="horarios">Horarios recomendados</label>
            <textarea id="horarios" name="horarios" placeholder="Ej: de 8:00 a 18:00"></textarea>

            <label for="epoca">Época recomendada</label>
            <select id="epoca" name="epoca" required>
                <option value="">Seleccione</option>
                <option value="verano">Verano</option>
                <option value="otoño">Otoño</option>
                <option value="invierno">Invierno</option>
                <option value="primavera">Primavera</option>
            </select>
            <div class="error" id="errorEpoca"></div>

            <button type="submit">Guardar Lugar</button>
            <button type="button" class="btn-volver" onclick="window.location.href='/pages/mapa-catamarca.html'">Volver</button>
        </form>
    </div>

    <script>
        const form = document.getElementById("lugarForm");

        form.addEventListener("submit", function (e) {
            e.preventDefault();
            let valido = true;

            // Nombre
            const nombre = document.getElementById("nombre");
            document.getElementById("errorNombre").textContent =
                nombre.value.trim() === "" ? (valido = false, "Ingrese un nombre") : "";

            // Coordenadas (lat,long)
            const coord = document.getElementById("coordenadas");
            const regexCoord = /^-?\d+(\.\d+)?\s*,\s*-?\d+(\.\d+)?$/;
            document.getElementById("errorCoordenadas").textContent =
                !regexCoord.test(coord.value) ? (valido = false, "Formato inválido. Ej: -28.4696, -65.7852") : "";

            // Imagen
            const imagen = document.getElementById("imagen");
            document.getElementById("errorImagen").textContent =
                imagen.files.length === 0 || !imagen.files[0].type.startsWith("image/")
                    ? (valido = false, "Debe seleccionar una imagen")
                    : "";

            // Dificultad
            const dificultad = document.getElementById("dificultad");
            document.getElementById("errorDificultad").textContent =
                dificultad.value === "" ? (valido = false, "Seleccione dificultad") : "";

            // Acceso
            const acceso = document.querySelectorAll("input[name='acceso']:checked");
            document.getElementById("errorAcceso").textContent =
                acceso.length === 0 ? (valido = false, "Seleccione al menos un acceso") : "";

            // Tipo
            const tipo = document.getElementById("tipo");
            document.getElementById("errorTipo").textContent =
                tipo.value === "" ? (valido = false, "Seleccione tipo de lugar") : "";

            // Época
            const epoca = document.getElementById("epoca");
            document.getElementById("errorEpoca").textContent =
                epoca.value === "" ? (valido = false, "Seleccione época recomendada") : "";

            if (valido) {
                alert("¡Lugar turístico agregado con éxito!");
                form.reset();
            } else {
                alert("Por favor complete correctamente todos los campos.");
            }
        });
    </script>

</body>

</html>